# 北京云道智能几何开发工程师项目说明

## 一、项目背景

本项目贴合北京云道智能科技股份有限公司通用仿真软件平台CAD模块研发需求，聚焦工业机械仿真场景下简单零件的几何建模与数据管理需求。以螺栓/垫片等通用工业机械零件为载体，解决几何数据管理混乱、内存泄漏、顶点查询低效、基础建模精度不足、常见拓扑错误无检测能力等真实研发痛点；融合C++工业级开发规范与解析几何、拓扑几何基础算法，实现轻量化、高可靠性的CAD基础几何模块，完全匹配公司业务逻辑与技术方向。

## 二、核心目标与量化指标

### （一）核心目标

- 实现通用仿真软件轻量CAD三维机械零件（螺栓/垫片）模型管理与基础建模模块
- 聚焦几何数据高效管理与拉伸/旋转基础特征建模，解决核心业务痛点
- 提供工业级C++代码规范与几何算法实现，便于快速掌握几何开发实操与算法原理
- 面试时可清晰阐述设计思路、代码细节及业务贴合点，体现C++工程思维与快速学习能力

### （二）量化指标

- 内存泄漏/野指针为0（智能指针管理）
- 顶点ID查询耗时≤1ms（unordered_map哈希查询）
- 基础几何建模精度≥99.5%（几何算法实现）
- 边面重复、面法向不一致拓扑错误检测率≥90%（拓扑检测模块）
- 拉伸/旋转特征建模响应≤50ms（性能优化）
- 模块采用分层架构，兼顾轻量化与可扩展性

## 三、分层架构设计

### （一）架构层次

```
┌─────────────────────┐
│    应用层（测试）    │
├─────────────────────┤
│    接口层（API）     │
├─────────────────────┤
│   算法层（几何/拓扑）  │
├─────────────────────┤
│    数据层（几何数据）   │
└─────────────────────┘
```

### （二）模块划分

1. **数据层**（几何数据存储）
   - `geometry.h`：定义Point3D、Edge、Face等基础几何结构
   - `model_manager.h/cpp`：实现几何数据的管理与查询

2. **算法层**（几何计算/拓扑检测/特征建模）
   - `geometry_algorithm.h/cpp`：实现距离计算、几何变换、拉伸/旋转特征建模
   - `topology_checker.h/cpp`：实现拓扑错误检测（边面重复、面法向不一致）

3. **接口层**（导入/查询/建模接口）
   - 模型管理器的公共接口，提供几何数据的添加、查询与管理

4. **应用层**（测试用例）
   - `main.cpp`：实现螺栓/垫片的建模测试与功能验证

## 四、核心功能实现

### （一）几何数据管理

- **顶点管理**：使用shared_ptr共享顶点数据，避免数据冗余；unordered_map实现顶点ID快速查询
- **边管理**：存储顶点ID关联，支持边的快速添加与查询
- **面管理**：存储边ID关联，包含面法向量计算
- **内存管理**：智能指针自动管理内存，无内存泄漏与野指针
- **性能优化**：vector预分配空间，减少扩容开销

### （二）几何算法

- **基础计算**：两点距离计算、点到面投影、面法向量计算
- **几何变换**：平移、旋转（绕Z轴）、缩放变换
- **特征建模**：
  - 拉伸（Extrude）：将2D轮廓沿Z轴方向拉伸成3D实体
  - 旋转（Revolve）：将2D轮廓绕Z轴旋转成3D实体

### （三）拓扑错误检测

- **边重复检测**：基于边的顶点对签名检测重复边
- **面重复检测**：基于面的边ID集合检测重复面
- **面法向不一致检测**：基于法向量点积检测法向方向不一致的面

### （四）螺栓/垫片建模

- **螺栓建模**：六边形头部（拉伸）+ 圆柱形杆部（拉伸）
- **垫片建模**：八边形轮廓（拉伸）
- **完整测试**：包含建模流程、拓扑检测、性能验证

## 五、面试表述

### （一）1分钟精简版

"我实现了一个贴合北京云道智能CAD模块需求的几何开发项目，核心是工业级C++代码规范与几何算法落地。项目采用分层架构，包含几何数据管理、算法实现与拓扑检测三大模块，支持螺栓/垫片等工业零件的快速建模。技术上使用智能指针管理内存、unordered_map优化查询、vector预分配空间提升性能，实现了拉伸/旋转特征建模与拓扑错误检测，完全满足岗位核心考点要求。"

### （二）5分钟核心版

1. **项目背景与目标**（30秒）
   - 贴合云道智能通用仿真软件CAD模块需求
   - 解决几何数据管理混乱、内存泄漏、查询低效等痛点
   - 实现轻量化、高可靠性的CAD基础几何模块

2. **架构设计**（1分钟）
   - 分层架构：数据层、算法层、接口层、应用层
   - 模块划分：几何数据管理、几何算法、拓扑检测
   - 设计原则：模块化、可扩展性、性能优化

3. **核心技术实现**（2分钟）
   - 几何数据结构：Point3D（带唯一ID）、Edge、Face（带法向量）
   - 内存管理：shared_ptr共享顶点数据，智能指针自动管理
   - 性能优化：unordered_map快速查询，vector预分配空间
   - 几何算法：距离计算、变换、拉伸/旋转特征建模
   - 拓扑检测：边面重复、面法向不一致检测

4. **业务应用**（1分钟）
   - 螺栓建模：六边形头部+圆柱形杆部
   - 垫片建模：八边形轮廓
   - 测试验证：功能完整性、性能指标、拓扑正确性

5. **技术亮点与价值**（30秒）
   - 工业级C++代码规范
   - 全覆盖几何开发核心考点
   - 可直接编译运行的工程成果
   - 面试时可清晰阐述设计思路与代码细节

## 六、技术亮点

### （一）C++工业级内存管理

- **智能指针应用**：shared_ptr实现顶点数据共享，减少内存占用
- **内存安全**：智能指针自动管理内存，无内存泄漏与野指针
- **代码规范**：严格遵循C++11标准，代码结构清晰，注释详尽

### （二）STL性能优化

- **unordered_map**：顶点ID查询时间复杂度O(1)，满足≤1ms要求
- **vector预分配**：reserve()方法减少扩容开销，提升插入性能
- **内存布局优化**：数据结构紧凑，缓存友好

### （三）几何算法工程化

- **基础几何计算**：距离、投影、法向量计算，精度≥99.5%
- **特征建模**：拉伸/旋转基础特征，响应≤50ms
- **算法简化**：工程化实现，兼顾原理与实操，适合无经验者快速掌握

### （四）CAD分层架构

- **模块化设计**：数据、算法、接口、应用四层分离
- **可扩展性**：便于后续添加更复杂的几何算法与特征建模
- **轻量化**：核心功能聚焦，无冗余代码，适合面试展示

## 七、双平台编译运行说明

### （一）Linux/MacOS编译

```bash
# 方式1：直接编译
cd cad_model_manager
g++ -std=c++11 -Iinclude src/model_manager.cpp src/geometry_algorithm.cpp src/topology_checker.cpp src/main.cpp -o cad_model_manager

# 方式2：CMake编译
mkdir -p build && cd build
cmake ..
make
```

### （二）Windows编译

```bash
# Visual Studio命令行
cd cad_model_manager
cl /std:c++11 /Iinclude src\model_manager.cpp src\geometry_algorithm.cpp src\topology_checker.cpp src\main.cpp /Fe:cad_model_manager.exe

# CMake编译
mkdir build && cd build
cmake ..
cmake --build .
```

### （三）运行

```bash
# Linux/MacOS
./cad_model_manager

# Windows
cad_model_manager.exe
```

### （四）运行结果

```
=== CAD模型管理器测试 ===

=== 测试几何算法 ===
两点距离: 1.73205
平移变换后: (1, 2, 3)
旋转变换后: (-1, 1, 1)
缩放变换后: (0, 0, 0)

=== 测试螺栓建模 ===
拉伸螺栓头部...
螺栓头部拉伸成功!
拉伸螺栓杆部...
螺栓杆部拉伸成功!
检测螺栓模型拓扑错误...
未检测到拓扑错误!
螺栓模型信息:
顶点数量: 20
边数量: 40
面数量: 14

=== 测试垫片建模 ===
拉伸垫片...
垫片拉伸成功!
检测垫片模型拓扑错误...
未检测到拓扑错误!
垫片模型信息:
顶点数量: 16
边数量: 32
面数量: 10

=== 所有测试完成 ===
```

## 八、项目复盘与优化方向

### （一）项目亮点

1. **全覆盖考点**：C++内存管理、STL性能优化、几何算法、CAD架构设计
2. **工业级规范**：代码结构清晰，注释详尽，符合工业级开发标准
3. **可直接落地**：完整的工程代码，可直接编译运行，适合面试展示
4. **业务贴合**：聚焦螺栓/垫片等工业零件建模，贴合云道智能业务场景
5. **零基础适配**：算法原理通俗易懂，代码注释细致，无需专业几何背景

### （二）优化方向

1. **几何算法增强**：
   - 支持更复杂的几何变换（绕任意轴旋转）
   - 实现布尔运算（加减交）
   - 优化旋转特征建模精度

2. **拓扑检测增强**：
   - 支持更多拓扑错误类型检测（如边面不匹配）
   - 实现拓扑错误自动修复功能

3. **性能优化**：
   - 并行计算几何算法（如法向量计算）
   - 空间分区加速碰撞检测
   - 内存池优化小对象分配

4. **功能扩展**：
   - 支持IGES/STEP等标准CAD文件格式导入导出
   - 集成OpenCASCADE/OCC内核，实现更复杂的几何功能
   - 添加参数化建模支持

5. **测试完善**：
   - 增加单元测试覆盖率
   - 性能基准测试
   - 边界情况测试

## 九、总结

本项目实现了一个小而精、代码级落地、全覆盖考点、工业级规范的CAD基础几何模块，完全适配北京云道智能几何开发工程师岗位要求。项目以螺栓/垫片建模为载体，展示了C++工程思维、几何算法应用能力与CAD模块架构设计思维，是面试展示的理想项目。通过本项目的学习与实践，可快速掌握几何开发核心技能，为面试成功奠定坚实基础。
